<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ°åŸŸåˆ¥ã‚°ãƒ«ãƒ¡æ²ç¤ºæ¿</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/bottom-nav.css}">

    <style>
        body {
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .mobile-container {
            max-width: 430px;
            margin: 0 auto;
            height: 100vh;
            background-color: #ffffff;
            border-left: 1px solid #f0f0f0;
            border-right: 1px solid #f0f0f0;
            display: flex;
            flex-direction: column;
            padding-bottom: 70px;
        }

        header {
            flex-shrink: 0;
            z-index: 1020;
            background-color: white;
        }

        main {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .region-card {
            transition: all 0.3s ease;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 8px;
            background: white;
        }

        .region-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .region-header {
            padding: 8px 12px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .region-header:hover {
            background-color: #e9ecef;
        }

        .region-name {
            font-size: 0.95rem;
            font-weight: 600;
            color: #333;
        }

        .card-image-container {
            width: 100%;
            height: 50px;
            overflow: hidden;
            background-color: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .no-image-placeholder {
            width: 100%;
            height: 50px;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            border-bottom: 1px solid #e0e0e0;
            font-size: 0.85rem;
        }

        .card-content {
            padding: 8px;
            cursor: pointer;
        }

        .card-title {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: #333;
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .card-text {
            font-size: 0.8rem;
            color: #666;
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 6px;
        }

        .card-meta {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.7rem;
            color: #888;
        }

        .prefecture-badge {
            background-color: #e3f2fd;
            color: #1976d2;
            padding: 2px 8px;
            border-radius: 8px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .no-post-message {
            padding: 40px 16px;
            text-align: center;
            color: #999;
        }
    </style>
</head>
<body>
    <div class="mobile-container">
        <header class="bg-white border-bottom py-3 px-3 d-flex justify-content-between align-items-center">
            <!-- ë’¤ë¡œê°€ê¸° -->
            <a th:href="@{/}"
               class="d-inline-flex align-items-center justify-content-center"
               style="cursor: pointer; font-size: 24px; line-height: 1; width: 24px; height: 24px; text-decoration: none; color: black;">ã€ˆ</a>

            <!-- ì œëª© -->
            <div class="d-flex flex-column align-items-center">
                <span class="fw-bold fs-4">åœ°åŸŸåˆ¥ã‚°ãƒ«ãƒ¡æ²ç¤ºæ¿</span>
            </div>

            <!-- ì˜¤ë¥¸ìª½ ê³µë°± (ëŒ€ì¹­ì„ ìœ„í•´) -->
            <div style="width: 24px;"></div>
        </header>

        <main class="p-3">
            <!-- åŒ—æµ·é“ãƒ»æ±åŒ— -->
            <div class="region-card" th:if="${regionPosts.containsKey('åŒ—æµ·é“ãƒ»æ±åŒ—')}">
                <div class="region-header" onclick="event.stopPropagation(); location.href='/board?region=' + encodeURIComponent('åŒ—æµ·é“ãƒ»æ±åŒ—');">
                    <span class="region-name">åŒ—æµ·é“ãƒ»æ±åŒ—</span>
                </div>
                <div th:with="post=${regionPosts.get('åŒ—æµ·é“ãƒ»æ±åŒ—')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <!-- ì´ë¯¸ì§€ê°€ ìˆëŠ” ê²½ìš° -->
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="ê²Œì‹œë¬¼ ì´ë¯¸ì§€">
                    </div>
                    <!-- ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° -->
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>ç”»åƒãªã—</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-1">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[éƒ½é“åºœçœŒ]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">ã‚¿ã‚¤ãƒˆãƒ«</h5>
                        <p class="card-text" th:text="${post.content}">å†…å®¹...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- é–¢æ± -->
            <div class="region-card" th:if="${regionPosts.containsKey('é–¢æ±')}">
                <div class="region-header" onclick="event.stopPropagation(); location.href='/board?region=' + encodeURIComponent('é–¢æ±');">
                    <span class="region-name">é–¢æ±</span>
                </div>
                <div th:with="post=${regionPosts.get('é–¢æ±')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="ê²Œì‹œë¬¼ ì´ë¯¸ì§€">
                    </div>
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>ç”»åƒãªã—</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-1">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[éƒ½é“åºœçœŒ]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">ã‚¿ã‚¤ãƒˆãƒ«</h5>
                        <p class="card-text" th:text="${post.content}">å†…å®¹...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä¸­éƒ¨ -->
            <div class="region-card" th:if="${regionPosts.containsKey('ä¸­éƒ¨')}">
                <div class="region-header" onclick="event.stopPropagation(); location.href='/board?region=' + encodeURIComponent('ä¸­éƒ¨');">
                    <span class="region-name">ä¸­éƒ¨</span>
                </div>
                <div th:with="post=${regionPosts.get('ä¸­éƒ¨')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="ê²Œì‹œë¬¼ ì´ë¯¸ì§€">
                    </div>
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>ç”»åƒãªã—</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-1">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[éƒ½é“åºœçœŒ]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">ã‚¿ã‚¤ãƒˆãƒ«</h5>
                        <p class="card-text" th:text="${post.content}">å†…å®¹...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è¿‘ç•¿ -->
            <div class="region-card" th:if="${regionPosts.containsKey('è¿‘ç•¿')}">
                <div class="region-header" onclick="event.stopPropagation(); location.href='/board?region=' + encodeURIComponent('è¿‘ç•¿');">
                    <span class="region-name">è¿‘ç•¿</span>
                </div>
                <div th:with="post=${regionPosts.get('è¿‘ç•¿')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="ê²Œì‹œë¬¼ ì´ë¯¸ì§€">
                    </div>
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>ç”»åƒãªã—</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-1">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[éƒ½é“åºœçœŒ]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">ã‚¿ã‚¤ãƒˆãƒ«</h5>
                        <p class="card-text" th:text="${post.content}">å†…å®¹...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä¸­å›½ãƒ»å››å›½ -->
            <div class="region-card" th:if="${regionPosts.containsKey('ä¸­å›½ãƒ»å››å›½')}">
                <div class="region-header" onclick="event.stopPropagation(); location.href='/board?region=' + encodeURIComponent('ä¸­å›½ãƒ»å››å›½');">
                    <span class="region-name">ä¸­å›½ãƒ»å››å›½</span>
                </div>
                <div th:with="post=${regionPosts.get('ä¸­å›½ãƒ»å››å›½')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="ê²Œì‹œë¬¼ ì´ë¯¸ì§€">
                    </div>
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>ç”»åƒãªã—</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-1">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[éƒ½é“åºœçœŒ]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">ã‚¿ã‚¤ãƒˆãƒ«</h5>
                        <p class="card-text" th:text="${post.content}">å†…å®¹...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä¹å·ãƒ»æ²–ç¸„ -->
            <div class="region-card" th:if="${regionPosts.containsKey('ä¹å·ãƒ»æ²–ç¸„')}">
                <div class="region-header" onclick="event.stopPropagation(); location.href='/board?region=' + encodeURIComponent('ä¹å·ãƒ»æ²–ç¸„');">
                    <span class="region-name">ä¹å·ãƒ»æ²–ç¸„</span>
                </div>
                <div th:with="post=${regionPosts.get('ä¹å·ãƒ»æ²–ç¸„')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="ê²Œì‹œë¬¼ ì´ë¯¸ì§€">
                    </div>
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>ç”»åƒãªã—</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-1">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[éƒ½é“åºœçœŒ]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">ã‚¿ã‚¤ãƒˆãƒ«</h5>
                        <p class="card-text" th:text="${post.content}">å†…å®¹...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ê²Œì‹œë¬¼ì´ ì—†ëŠ” ê²½ìš° -->
            <div th:if="${#maps.isEmpty(regionPosts)}" class="no-post-message">
                <p>ã¾ã æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            </div>
        </main>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav style="position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 430px; height: 70px; background-color: white; border-top: 1px solid #e0e0e0; display: flex; justify-content: space-around; align-items: center; z-index: 1000;">
        <a th:href="@{/}" style="display: flex; flex-direction: column; align-items: center; padding: 8px; text-decoration: none; color: #333;">
            <span style="font-size: 24px;">ğŸ </span>
            <span style="font-size: 11px; margin-top: 4px;">ãƒ›ãƒ¼ãƒ </span>
        </a>
        <a th:href="@{/boards}" style="display: flex; flex-direction: column; align-items: center; padding: 8px; text-decoration: none; color: #333;">
            <span style="font-size: 24px;">ğŸ“‹</span>
            <span style="font-size: 11px; margin-top: 4px;">åœ°åŸŸæ²ç¤ºæ¿</span>
        </a>
        <a th:href="@{/board}" style="display: flex; flex-direction: column; align-items: center; padding: 8px; text-decoration: none; color: #333;">
            <span style="font-size: 24px;">ğŸ”</span>
            <span style="font-size: 11px; margin-top: 4px;">ã‚°ãƒ«ãƒ¡</span>
        </a>
        <a th:if="${session.loginUser == null}" th:href="@{/login}" style="display: flex; flex-direction: column; align-items: center; padding: 8px; text-decoration: none; color: #333;">
            <span style="font-size: 24px;">ğŸ‘¤</span>
            <span style="font-size: 11px; margin-top: 4px;">ãƒ­ã‚°ã‚¤ãƒ³</span>
        </a>
        <a th:if="${session.loginUser != null}" th:href="@{/profile/{userId}(userId=${session.loginUser.userId})}" style="display: flex; flex-direction: column; align-items: center; padding: 8px; text-decoration: none; color: #333;">
            <span style="font-size: 24px;">ğŸ‘¤</span>
            <span style="font-size: 11px; margin-top: 4px;">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</span>
        </a>
    </nav>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

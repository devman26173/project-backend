<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>地域別グルメ掲示板</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .mobile-container {
            max-width: 430px;
            margin: 0 auto;
            height: 100vh;
            background-color: #ffffff;
            border-left: 1px solid #f0f0f0;
            border-right: 1px solid #f0f0f0;
            display: flex;
            flex-direction: column;
        }

        header {
            flex-shrink: 0;
            z-index: 1020;
            background-color: white;
        }

        main {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .region-card {
            transition: all 0.3s ease;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 12px;
            background: white;
        }

        .region-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .region-header {
            padding: 8px 12px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .region-header:hover {
            background-color: #e9ecef;
        }

        .region-name {
            font-size: 0.95rem;
            font-weight: 600;
            color: #333;
        }

        .card-image-container {
            width: 100%;
            height: 100px;
            overflow: hidden;
            background-color: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .no-image-placeholder {
            width: 100%;
            height: 100px;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            border-bottom: 1px solid #e0e0e0;
            font-size: 0.85rem;
        }

        .card-content {
            padding: 12px;
            cursor: pointer;
        }

        .card-title {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 6px;
            color: #333;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .card-text {
            font-size: 0.85rem;
            color: #666;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .card-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.75rem;
            color: #888;
        }

        .prefecture-badge {
            background-color: #e3f2fd;
            color: #1976d2;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .no-post-message {
            padding: 40px 16px;
            text-align: center;
            color: #999;
        }
    </style>
</head>
<body>
    <div class="mobile-container">
        <header class="bg-white border-bottom py-3 px-3 d-flex justify-content-between align-items-center">
            <!-- 뒤로가기 -->
            <a th:href="@{/}"
               class="d-inline-flex align-items-center justify-content-center"
               style="cursor: pointer; font-size: 24px; line-height: 1; width: 24px; height: 24px; text-decoration: none; color: black;">〈</a>

            <!-- 제목 -->
            <div class="d-flex flex-column align-items-center">
                <span class="fw-bold fs-4">地域別グルメ掲示板</span>
            </div>

            <!-- 오른쪽 공백 (대칭을 위해) -->
            <div style="width: 24px;"></div>
        </header>

        <main class="p-3">
            <!-- 北海道・東北 -->
            <div class="region-card" th:if="${regionPosts.containsKey('北海道・東北')}">
                <div class="region-header" th:onclick="'location.href=\'/board?region=' + encodeURIComponent('北海道・東北') + '\''">
                    <span class="region-name">北海道・東北</span>
                </div>
                <div th:with="post=${regionPosts.get('北海道・東北')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <!-- 이미지가 있는 경우 -->
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="게시물 이미지">
                    </div>
                    <!-- 이미지가 없는 경우 -->
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>画像なし</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-2">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[都道府県]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">タイトル</h5>
                        <p class="card-text" th:text="${post.content}">内容...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 関東 -->
            <div class="region-card" th:if="${regionPosts.containsKey('関東')}">
                <div class="region-header" th:onclick="'location.href=\'/board?region=' + encodeURIComponent('関東') + '\''">
                    <span class="region-name">関東</span>
                </div>
                <div th:with="post=${regionPosts.get('関東')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="게시물 이미지">
                    </div>
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>画像なし</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-2">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[都道府県]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">タイトル</h5>
                        <p class="card-text" th:text="${post.content}">内容...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 中部 -->
            <div class="region-card" th:if="${regionPosts.containsKey('中部')}">
                <div class="region-header" th:onclick="'location.href=\'/board?region=' + encodeURIComponent('中部') + '\''">
                    <span class="region-name">中部</span>
                </div>
                <div th:with="post=${regionPosts.get('中部')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="게시물 이미지">
                    </div>
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>画像なし</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-2">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[都道府県]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">タイトル</h5>
                        <p class="card-text" th:text="${post.content}">内容...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 近畿 -->
            <div class="region-card" th:if="${regionPosts.containsKey('近畿')}">
                <div class="region-header" th:onclick="'location.href=\'/board?region=' + encodeURIComponent('近畿') + '\''">
                    <span class="region-name">近畿</span>
                </div>
                <div th:with="post=${regionPosts.get('近畿')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="게시물 이미지">
                    </div>
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>画像なし</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-2">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[都道府県]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">タイトル</h5>
                        <p class="card-text" th:text="${post.content}">内容...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 中国・四国 -->
            <div class="region-card" th:if="${regionPosts.containsKey('中国・四国')}">
                <div class="region-header" th:onclick="'location.href=\'/board?region=' + encodeURIComponent('中国・四国') + '\''">
                    <span class="region-name">中国・四国</span>
                </div>
                <div th:with="post=${regionPosts.get('中国・四国')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="게시물 이미지">
                    </div>
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>画像なし</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-2">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[都道府県]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">タイトル</h5>
                        <p class="card-text" th:text="${post.content}">内容...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 九州・沖縄 -->
            <div class="region-card" th:if="${regionPosts.containsKey('九州・沖縄')}">
                <div class="region-header" th:onclick="'location.href=\'/board?region=' + encodeURIComponent('九州・沖縄') + '\''">
                    <span class="region-name">九州・沖縄</span>
                </div>
                <div th:with="post=${regionPosts.get('九州・沖縄')}"
                     th:onclick="'location.href=\'/board/view/' + ${post.id} + '\''"
                     style="cursor: pointer;">
                    <div th:if="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="card-image-container">
                        <img th:src="${post.imageUrls.split(',')[0]}" class="card-image" alt="게시물 이미지">
                    </div>
                    <div th:unless="${post.imageUrls != null and !post.imageUrls.isEmpty()}" class="no-image-placeholder">
                        <span>画像なし</span>
                    </div>

                    <div class="card-content">
                        <div class="mb-2">
                            <span class="prefecture-badge" th:text="${post.prefecture}">[都道府県]</span>
                        </div>
                        <h5 class="card-title" th:text="${post.title}">タイトル</h5>
                        <p class="card-text" th:text="${post.content}">内容...</p>
                        <div class="card-meta">
                            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 게시물이 없는 경우 -->
            <div th:if="${#maps.isEmpty(regionPosts)}" class="no-post-message">
                <p>まだ投稿がありません。</p>
            </div>
        </main>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
